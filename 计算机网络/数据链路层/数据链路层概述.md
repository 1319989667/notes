链路：从一个结点到其相邻结点的一段物理线路，中间没有任何其他结点，多个链路组成从发送方到接收方的一条完整路径。



链路类型：点对点链路、广播链路（例如总线型、无线链路） 

广域网，因为规模较大，一般都是点对点链路；局域网则多为广播链路，不过也有点对点链路。

# 数据链路层的任务

1. 差错检验

2. 将差错数据丢弃，不改正。

3. 媒体访问控制（Medium Access Control， MAC）【最主要的任务】

   要解决如何有效地利用传输媒体的问题。



# 差错检验

## 奇偶校验

```
原始数据 1110000
奇校验  11100000(最后附加位为0)
偶校验  11100001（最后附加位为1）
```

一维奇偶校验只能检测出大约一半的差错。



二维奇偶校验可以检测出奇数个差错，还可以检测出两个差错，但是不一定能检测出多于两个的偶数个差错。

## 循环冗余校验

CRC的过程是一种用来检测或校验数据传输或者存储后可能出现的错误的方法。

它的基本原理是：发送方和接收方事先约定一个多项式作为除数，发送方在发送数据前用模二除法计算出余数（即CRC码），并附加到数据后面，接收方收到数据后用同样的除数进行模二除法，如果余数为0，则认为没有错误。

[假设你要发送一组数据A：10110011（二进制），并且你和接收方事先约定了一个多项式作为除数B：11001。那么你需要按照以下步骤计算CRC码：

1. [在数据A后面加上除数B的位数-1个0，得到新的数据A’：101100110000。
2. [用数据A’除以除数B，进行模二除法，即只做异或运算。具体过程如下：

```
  101100110000
/ 11001
= 111010001000
```

1. 得到的余数就是CRC码，即1000[1](https://blog.csdn.net/u013073067/article/details/86621770)。
2. [将CRC码附加到数据A后面，得到最终要发送的数据C：101100111000。

这样，接收方收到数据C后，就可以用同样的除数B进行模二除法，如果余数为0，则说明没有错误；否则说明有错误。



## 媒体访问控制

链路有两种类型：点对点链路和广播链路，对于点对点链路，媒体访问控制非常简单：半双工通信时，媒体访问控制要协调好双方的收发关系，双方同时发送会出现混乱。单工通信和全双工通信，一有数据就可以发送，不需要媒体的访问控制。

对于广播链路，广播链路的媒体访问控制协议有：信道划分协议、轮流协议、随机访问协议。

### 信道划分协议

频分复用、时分复用、码分复用。

但计算机网络发展到现在，很少采用信道复用技术，只是在通信领域中常见。

### 轮流协议

基本思想是各结点轮流发送数据。轮流协议可分为两类：轮询协议和令牌传递协议。

1. 轮询协议

轮询协议会设置一个主结点，由这个主结点轮流询问其他结点是否还有数据要发送，若有则发送，未被询问的结点不得发送。这就不会有碰撞。

缺点：询问需要时间，降低了效率；若主结点发送故障，整个网络将不能工作。

2.令牌传递协议

令牌：一个特殊的帧。

令牌只有一个，在各结点间按规定的顺序传递。一个结点如果没有数据要发送，收到令牌时就立刻把令牌传递给下一个结点；若有数据要发送，必须收到令牌后才能发送。

优点：不会有碰撞，效率很高。

缺点：需要解决的问题非常复杂，且容易出故障。



### 随机访问协议

基本思想：每个结点有数据要发送时就立即发送，若有碰撞，则重发碰撞数据，反复数次直到发送成功为止。

两种最典型的随机访问协议：ALOHA协议和CSMA/CD协议

#### ALOHA协议

工作流程：

（1） 某结点有帧要发送时就发送整个帧。

（2） 如果没有碰撞则发送成功。

（3） 如果有碰撞则发送失败，该结点等待一段**随机**的时间重发这一帧，反复重发直到发送成功。

纯ALOHA协议的最高效率只有18.4%。

对ALOHA协议进行改进称为时隙ALOHA协议。

时隙ALOHA协议的要点是把时间分为多个时隙，所有的帧只会在一个时隙的开头发送数，每个时隙刚好发送一帧，其余都与纯ALOHA协议相同。

#### CSMA /CD协议
